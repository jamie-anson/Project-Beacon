# Trusted Keys Configuration for Project Beacon

## Overview
The Project Beacon runner app uses a trust allowlist to validate Ed25519 signatures on job submissions. This document explains how to configure the trusted keys.

## Configuration Steps

### 1. Trusted Keys File
The trusted keys are stored in `trusted-keys.json` with the following format:

```json
{
  "trusted_keys": [
    {
      "public_key": "xsIE/NE5XmHyA2EPQ/ZMJjeHCsOqDo/eoGaQ83mnnMo=",
      "status": "active",
      "description": "Project Beacon Portal Key",
      "created_at": "2024-01-15T00:00:00Z",
      "valid_from": "2024-01-15T00:00:00Z",
      "valid_until": "2025-12-31T23:59:59Z"
    }
  ]
}
```

### 2. Environment Variable
Set the `TRUSTED_KEYS_FILE` environment variable to point to the trusted keys file:

```bash
export TRUSTED_KEYS_FILE=/path/to/trusted-keys.json
```

### 3. Runner App Configuration
The runner app will automatically load and validate the trusted keys file on startup. The trust registry is implemented in `runner-app/internal/config/trust.go`.

## Portal Public Key
The current Project Beacon portal public key is:
```
xsIE/NE5XmHyA2EPQ/ZMJjeHCsOqDo/eoGaQ83mnnMo=
```

This key is generated by the portal and stored in browser localStorage. Jobs signed with this key will be accepted by the runner app.

## Key Management
- Keys have validity periods (`valid_from` to `valid_until`)
- Keys can be marked as `active` or `inactive` via the `status` field
- The runner app validates both signature authenticity and key trust status
- New keys can be added to the `trusted_keys` array as needed

## Security Notes
- Only jobs signed with trusted keys will be accepted
- The trust policy is enforced at the API level before job processing
- Key rotation should be coordinated between portal and runner app deployments
